<% @home_setting = HomeSetting.instance %>
<% overlay_color = @home_setting.overlay_color || '#000000' %>
<% overlay_opacity = @home_setting.overlay_opacity || 0.7 %>

<!-- Hero Section - Optimized for LCP -->
<section id="hero" class="relative h-screen flex items-center justify-center bg-gray-900 overflow-hidden">
  <% hero_image = @home_setting.hero_background_desktop.attached? ? url_for(@home_setting.hero_background_desktop) : asset_path('hero_05.jpeg') %>
  
  <%= image_tag hero_image, 
                class: "absolute inset-0 w-full h-full object-cover object-center", 
                alt: @home_setting.hero_title || "Hero background",
                fetchpriority: "high",
                loading: "eager" %>
  
  <!-- Overlay with dynamic color and opacity -->
  <div class="absolute inset-0" 
       style="background: linear-gradient(135deg, <%= overlay_color %><%= format('%02x', (overlay_opacity * 255).to_i) %> 0%, <%= overlay_color %><%= format('%02x', ((overlay_opacity * 0.7) * 255).to_i) %> 100%);"></div>
  
  <!-- Content -->
  <div class="container-custom relative z-10 w-full">
    <div class="text-center mb-8">
      <h1 class="text-4xl lg:text-6xl font-bold text-white mb-4 drop-shadow-lg">
        <%= @home_setting.hero_title || "Encontre o imóvel dos seus sonhos" %>
      </h1>
      <p class="text-xl text-white/90 drop-shadow-md max-w-2xl mx-auto">
        <%= @home_setting.hero_subtitle || "As melhores oportunidades em Balneário Camboriú e região" %>
      </p>
    </div>
    
    <!-- Search Form Imobill Style -->
    <div>
      <%= render 'shared/search_hero_imobill' %>
    </div>
  </div>
</section>
