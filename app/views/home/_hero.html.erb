<% @home_setting = HomeSetting.instance %>
<% overlay_color = @home_setting.overlay_color || '#000000' %>
<% overlay_opacity = @home_setting.overlay_opacity || 0.7 %>

<!-- Hero Section - Cinematic Master Edition -->
<section id="hero" class="relative h-[90vh] lg:h-screen flex items-center justify-center bg-gray-900 overflow-hidden" 
         data-controller="hero-slider" 
         data-hero-slider-interval-value="10000"
         style="--hero-overlay-start: <%= overlay_color %><%= format('%02x', (overlay_opacity * 255).to_i) %>; 
                --hero-overlay-end: <%= overlay_color %><%= format('%02x', ((overlay_opacity * 0.45) * 255).to_i) %>;">
  
  <!-- Cinematic Slider Container -->
  <div class="hero-slider-container">
    <%# Tentamos carregar múltiplas imagens se disponíveis, senão usamos a padrão %>
    <% hero_images = [] %>
    
    <% if @home_setting.hero_background_desktop.attached? %>
      <% hero_images << url_for(@home_setting.hero_background_desktop) %>
    <% end %>
    
    <%# Fallback assets %>
    <% ['hero_05.jpeg'].each do |img| %>
      <% hero_images << asset_path(img) if hero_images.size < 3 %>
    <% end %>

    <% hero_images.uniq.each_with_index do |img_url, index| %>
      <div class="hero-slide <%= 'active' if index == 0 %>" data-hero-slider-target="slide">
        <%= image_tag img_url, 
                      class: "hero-image", 
                      alt: "Salute Imóveis - Luxo e Exclusividade",
                      fetchpriority: index == 0 ? "high" : "low",
                      loading: index == 0 ? "eager" : "lazy" %>
      </div>
    <% end %>
  </div>
  
  <!-- Overlay with Premium Gradient -->
  <div class="hero-overlay"></div>
  
  <!-- Content -->
  <div class="container-custom hero-content-wrapper w-full">
    <div class="text-center mb-10 max-w-4xl mx-auto">
      <h1 class="text-4xl md:text-5xl lg:text-7xl font-bold text-white mb-6 tracking-tight leading-tight">
        <%= @home_setting.hero_title || "Encontre o imóvel dos seus sonhos" %>
      </h1>
      <p class="text-lg md:text-xl text-white/90 max-w-2xl mx-auto font-medium">
        <%= @home_setting.hero_subtitle || "As melhores oportunidades em Balneário Camboriú e região" %>
      </p>
    </div>
    
    <!-- Search Form Imobill Style -->
    <div class="relative z-20">
      <%= render 'shared/search_hero_imobill' %>
    </div>
  </div>
  
  <!-- Bottom Fade to Content -->
  <div class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-gray-900 to-transparent z-10 pointer-events-none"></div>
</section>
