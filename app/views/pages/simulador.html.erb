<!-- Simulador de Financiamento - Modern Design -->

<!-- Hero -->
<section class="relative h-[400px] flex items-center justify-center bg-cover bg-center" 
         style="background-image: linear-gradient(rgba(30, 64, 175, 0.8), rgba(30, 64, 175, 0.8)), url('<%= asset_path 'hero_05.jpeg' %>');">
  <div class="container-custom relative z-10 text-center text-white">
    <h1 class="text-4xl lg:text-5xl font-bold mb-4" data-aos="fade-up">Simulador de Financiamento</h1>
    <p class="text-xl" data-aos="fade-up" data-aos-delay="100">Simule o financiamento do seu imóvel</p>
  </div>
</section>

<!-- Simulator -->
<section class="py-16 bg-gray-50">
  <div class="container-custom">
    <div class="max-w-3xl mx-auto bg-white p-8 rounded-xl shadow-lg">
      <h2 class="text-2xl font-bold text-blue-three mb-8">Preencha os dados</h2>
      
      <form class="space-y-6" id="simulador-form">
        <!-- Property Value -->
        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-2">Valor do Imóvel</label>
          <div class="relative">
            <span class="absolute left-4 top-3 text-gray-500">R$</span>
            <input type="text" id="property-value" class="w-full pl-12 pr-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-golden-one focus:border-transparent" placeholder="500.000,00">
          </div>
        </div>

        <!-- Down Payment -->
        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-2">Entrada (%)</label>
          <input type="number" id="down-payment" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-golden-one focus:border-transparent" value="20" min="0" max="100">
        </div>

        <!-- Period -->
        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-2">Prazo (meses)</label>
          <input type="number" id="period" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-golden-one focus:border-transparent" value="360" min="12" max="480">
        </div>

        <!-- Interest Rate -->
        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-2">Taxa de Juros (% ao ano)</label>
          <input type="number" step="0.1" id="interest-rate" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-golden-one focus:border-transparent" value="8.5">
        </div>

        <button type="button" onclick="calcular()" class="w-full bg-golden-one text-blue-three font-bold py-4 px-8 rounded-lg hover:bg-blue-three hover:text-white transition-all shadow-md hover:shadow-xl">
          <i class="bi bi-calculator mr-2"></i>
          Calcular Parcela
        </button>
      </form>

      <!-- Result -->
      <div id="result" class="hidden mt-8 p-6 bg-blue-three text-white rounded-xl">
        <h3 class="text-2xl font-bold mb-4">Resultado da Simulação</h3>
        <div class="space-y-2">
          <p class="flex justify-between text-lg"><span>Valor Financiado:</span> <strong id="financed-value"></strong></p>
          <p class="flex justify-between text-lg"><span>Parcela Mensal:</span> <strong id="monthly-payment" class="text-golden-one text-2xl"></strong></p>
          <p class="flex justify-between"><span>Total a Pagar:</span> <strong id="total-payment"></strong></p>
        </div>
      </div>
    </div>

    <!-- Disclaimer -->
    <p class="text-center text-gray-500 text-sm mt-8 max-w-2xl mx-auto">
      * Esta é apenas uma simulação. Os valores reais podem variar de acordo com a instituição financeira 
      e análise de crédito. Consulte nossos corretores para orientação personalizada.
    </p>
  </div>
</section>

<script>
function calcular() {
  const propertyValue = parseFloat(document.getElementById('property-value').value.replace(/\D/g, ''));
  const downPaymentPercent = parseFloat(document.getElementById('down-payment').value);
  const period = parseInt(document.getElementById('period').value);
  const annualRate = parseFloat(document.getElementById('interest-rate').value);
  
  const downPaymentValue = propertyValue * (downPaymentPercent / 100);
  const financedValue = propertyValue - downPaymentValue;
  const monthlyRate = (annualRate / 100) / 12;
  
  const monthlyPayment = financedValue * (monthlyRate * Math.pow(1 + monthlyRate, period)) / (Math.pow(1 + monthlyRate, period) - 1);
  const totalPayment = monthlyPayment * period + downPaymentValue;
  
  document.getElementById('financed-value').textContent = 'R$ ' + financedValue.toLocaleString('pt-BR', {minimumFractionDigits: 2});
  document.getElementById('monthly-payment').textContent = 'R$ ' + monthlyPayment.toLocaleString('pt-BR', {minimumFractionDigits: 2});
  document.getElementById('total-payment').textContent = 'R$ ' + totalPayment.toLocaleString('pt-BR', {minimumFractionDigits: 2});
  
  document.getElementById('result').classList.remove('hidden');
}
</script>
